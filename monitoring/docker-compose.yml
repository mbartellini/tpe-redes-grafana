services:
    grafana:
        image: grafana/grafana-enterprise
        container_name: tpe-redes-grafana
        restart: unless-stopped
        ports:
        - '2000:3000'
        networks:
            - network
        volumes:
            - ./grafana_data/dashboard.yaml:/etc/grafana/provisioning/dashboards/dashboard.yaml
            - ./grafana_data/datasources.yaml:/etc/grafana/provisioning/datasources/datasources.yaml
            - ./grafana_data/dashboards:/var/lib/grafana/dashboards
        
    prometheus:
        image: prom/prometheus
        container_name: tpe-redes-prometheus
        ports:
            - 9090:9090
        volumes:
            - ./prometheus_data/prometheus.yml:/etc/prometheus/prometheus.yml
        command:
            - '--config.file=/etc/prometheus/prometheus.yml'
        networks:
            - network

networks:
    network:
        name: tpe-redes-network
        external: true
